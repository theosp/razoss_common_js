var HPosition={fill:0,center:1,left:2,right:3},VPosition={fill:0,center:4,top:8,bottom:12},MovePosition={absolute:0,relative:1},NavigateTarget={current:0,newtab:1,newwindow:2},ShowMode={hide:0,show:1},NewWindowBehavior={defaultBehavior:0,razossPopup:1,hostCurrentTab:2,hostNewTab:3},KeywordsType={all:0,title:1,description:2,heading:4,bold:8},rgw={version:"0.11",RazossBrowser:false,Cache:{get:function(){return window.external.rapi_Cache_Get()},set:function(a){window.external.rapi_Cache_Set(a)},query:function(a,
b){window.external.rapi_Cache_Query(a,b)}},onLoad:function(){try{this.RazossBrowser=window.external.rapi_IsRazossBrowser()!=null}catch(a){this.RazossBrowser=null}},getFrameworkVersion:function(){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_GetFrameworkVersion()},getFrameworkDate:function(){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_GetFrameworkDate()},log:function(){if(!this.RazossBrowser)throw"Browser Not Supported";},registerEvent:function(a,
b){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_RegisterEvent(a,b)},unregisterEvent:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_UnregisterEvent(a)},navigate:function(a,b){if(!this.RazossBrowser)throw"Browser Not Supported";if(b==undefined)b=NavigateTarget.current;window.external.rapi_Navigate(a,b)},getCurrentPage:function(){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_GetCurrentURL()},
getCurrentTitle:function(){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_GetCurrentTitle()},getPageKeywords:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_GetPageKeywords(a)},getCurrentMetadata:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_GetCurrentMetadata(a)},getEngineVariable:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_GetEngineVariable(a)},
setStorageValue:function(a,b){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_SetStorageValue(a,b)},getStorageValue:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_GetStorageValue(a)},isStorageValueExists:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_IsStorageValueExists(a)},executeScript:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_ExecuteScript(a)},
setNewWindowBehavior:function(a,b){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_SetNewWindowBehavior(a,b)},postPageInfo:function(a,b){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_PostPageInfo(a,b)},postPageInfoAsync:function(){if(!this.RazossBrowser)throw"Browser Not Supported";},newWindow:function(a,b,d){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_NewWindow(a,b,d)},closeWindow:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";
return window.external.rapi_CloseWindow(a)},getCurrentSize:function(){if(!this.RazossBrowser)throw"Browser Not Supported";var a=-1,b=-1;try{a=window.external.rapi_GetCurrentWidth();b=window.external.rapi_GetCurrentHeight()}catch(d){a=b=-1}return{width:a,height:b}},dock:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_Dock(a)},dockEx:function(){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_Dock(pos)},resize:function(a,b,d){if(!this.RazossBrowser)throw"Browser Not Supported";
if(d==undefined)d=true;window.external.rapi_Resize(a,b,d)},resizeKeepPosition:function(a,b,d){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_Resize(a,b,d)},show:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_Show(a)},isVisible:function(){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_IsVisible()},close:function(){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_Close()},
closeAllButThis:function(){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_CloseAllButThis()},getWindowPos:function(){if(!this.RazossBrowser)throw"Browser Not Supported";},setWindowPos:function(){if(!this.RazossBrowser)throw"Browser Not Supported";},setPositionOffset:function(){},setTrasparentColor:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_SetTransparency(a)},getTrasparentColor:function(){if(!this.RazossBrowser)throw"Browser Not Supported";
return window.external.rapi_GetTransparency()},setOpacity:function(a){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_SetOpacity(a)},getOpacity:function(){if(!this.RazossBrowser)throw"Browser Not Supported";return window.external.rapi_GetOpacity()},moveWindow:function(a,b,d){if(!this.RazossBrowser)throw"Browser Not Supported";window.external.rapi_MoveWindow(a,b,d)}};rgw.onLoad();
(function(a){function b(){if(h.jStorage)try{g=n(String(h.jStorage))}catch(c){h.jStorage="{}"}else h.jStorage="{}";m=h.jStorage?String(h.jStorage).length:0}function d(){try{h.jStorage=o(g);if(e){e.setAttribute("jStorage",h.jStorage);e.save("jStorage")}m=h.jStorage?String(h.jStorage).length:0}catch(c){}}function i(c){if(!c||typeof c!="string"&&typeof c!="number")throw new TypeError("Key name must be string or numeric");return true}if(!a||!(a.toJSON||Object.toJSON||window.JSON))throw Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");
var g={},h={jStorage:"{}"},e=null,m=0,o=a.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),n=a.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(c){return String(c).evalJSON()},j=false;_XMLService={isXML:function(c){return(c=(c?c.ownerDocument||c:0).documentElement)?c.nodeName!=="HTML":false},encode:function(c){if(!this.isXML(c))return false;try{return(new XMLSerializer).serializeToString(c)}catch(f){try{return c.xml}catch(k){}}return false},decode:function(c){var f="DOMParser"in
window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(k){var l=new ActiveXObject("Microsoft.XMLDOM");l.async="false";l.loadXML(k);return l};if(!f)return false;c=f.call("DOMParser"in window&&new DOMParser||window,c,"text/xml");return this.isXML(c)?c:false}};a.jStorage={version:"0.1.5.0",set:function(c,f){i(c);if(_XMLService.isXML(f))f={_is_xml:true,xml:_XMLService.encode(f)};g[c]=f;d();return f},get:function(c,f){i(c);if(c in g)return typeof g[c]=="object"&&g[c]._is_xml&&g[c]._is_xml?
_XMLService.decode(g[c].xml):g[c];return typeof f=="undefined"?null:f},deleteKey:function(c){i(c);if(c in g){delete g[c];d();return true}return false},flush:function(){g={};d();try{window.localStorage.clear()}catch(c){}return true},storageObj:function(){function c(){}c.prototype=g;return new c},index:function(){var c=[],f;for(f in g)g.hasOwnProperty(f)&&c.push(f);return c},storageSize:function(){return m},currentBackend:function(){return j},storageAvailable:function(){return!!j},reInit:function(){var c;
if(e&&e.addBehavior){c=document.createElement("link");e.parentNode.replaceChild(c,e);e=c;e.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(e);e.load("jStorage");c="{}";try{c=e.getAttribute("jStorage")}catch(f){}h.jStorage=c;j="userDataBehavior"}b()}};(function(){if("localStorage"in window)try{if(window.localStorage){h=window.localStorage;j="localStorage"}}catch(c){}else if("globalStorage"in window)try{if(window.globalStorage){h=window.globalStorage[window.location.hostname];
j="globalStorage"}}catch(f){}else{e=document.createElement("link");if(e.addBehavior){e.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(e);e.load("jStorage");var k="{}";try{k=e.getAttribute("jStorage")}catch(l){}h.jStorage=k;j="userDataBehavior"}else{e=null;return}}b()})()})(window.jQuery||window.$);
(function(a){a.RazossApi=function(b){if(typeof b==="undefined")b={};this.options=theosp.object.clone(this.options);a.extend(this.options,b);this.environment=null;this.init()};a.RazossApi.prototype=new EventEmitter;a.RazossApi.prototype.constructor=a.RazossApi;a.RazossApi.prototype.options={};a.RazossApi.prototype.iframe_links_targets={"default":"defaultBehavior",popup:"razossPopup",current:"hostCurrentTab",new_tab:"hostNewTab"};a.RazossApi.prototype.$=function(b,d){b=theosp.string.supplant(b,{prefix:this.options.css_prefix});
return a(b,d)};a.RazossApi.prototype.init=function(){this.environment=rgw.RazossBrowser?"razoss_browser":typeof GM_log!=="undefined"?"greasemonkey":"direct_view";var b=this.getHostBrowser();a("html").addClass("host_browser-"+b[0])};a.RazossApi.prototype.getUid=function(){return this.environment==="razoss_browser"?rgw.getEngineVariable("engineid"):null};a.RazossApi.prototype.version=function(){return this.environment==="razoss_browser"?rgw.getEngineVariable("engineversion"):"plugin_mode"};a.RazossApi.prototype.openUrl=
function(b){this.environment==="razoss_browser"?rgw.navigate(b):window.open(b);return this};a.RazossApi.prototype.printScreen=function(){return this.environment==="razoss_browser"?"http://www.razoss.com/alpha/app/thumbs/"+rgw.postPageInfo("www.razoss.com","/razoss_services/razoss_uploader.php"):""};a.RazossApi.prototype.getWindowUrl=function(){return this.environment==="razoss_browser"?rgw.getCurrentPage():"http://www.razoss.com/"};a.RazossApi.prototype.getWindowTitle=function(){return this.environment===
"razoss_browser"?rgw.getCurrentTitle():"Razoss"};a.RazossApi.prototype.getWindowDescription=function(){return this.environment==="razoss_browser"?rgw.getCurrentMetadata("description"):""};a.RazossApi.prototype.setIframeLinksTarget=function(b,d){if(this.environment==="razoss_browser")if(typeof b!=="undefined"){if(typeof d==="undefined")d="default";d in this.iframe_links_targets||(d="default");rgw.setNewWindowBehavior(b,NewWindowBehavior[this.iframe_links_targets[d]])}};a.RazossApi.prototype.dock=function(b,
d){if(this.environment==="razoss_browser"){rgw.dock(HPosition[b]|VPosition[d]);document.body.style.backgroundColor=rgw.getTrasparentColor();rgw.setOpacity(255)}};a.RazossApi.prototype.getHostBrowser=function(){if(this.environment==="razoss_browser"){var b=rgw.getEngineVariable("hostbrowser").toLowerCase();b=/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||!/compatible/.test(b)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(b)||[];if(b[1]==="msie")b[1]=
"ie";return[b[1],b[2]]}else return["direct",0]};a.RazossApi.prototype.put=function(b,d){if(this.environment==="razoss_browser")rgw.setStorageValue(b,d);else a.jStorage.storageAvailable()&&a.jStorage.set(b,d)};a.RazossApi.prototype.get=function(b,d){if(typeof d==="undefined")d=null;if(this.environment==="razoss_browser"){var i=rgw.getStorageValue(b);return i===""?d:i}else{if(a.jStorage.storageAvailable())return a.jStorage.get(b,d);return d}};RAZOSS_API=new a.RazossApi;RAZOSS_API.listeners={};RAZOSS_API.getEventName=
function(b){return"razoss_event_"+b};RAZOSS_API.newRazossEventListener=function(b){var d=this;if(d.environment==="razoss_browser")if(typeof RAZOSS_API.listeners[b]==="undefined"){window[d.getEventName(b)]=function(){var i=Array.prototype.slice.call(arguments);i.unshift(d.getEventName(b));RAZOSS_API.emit.apply(d,i)};rgw.registerEvent(b,d.getEventName(b))}};RAZOSS_API.onRazossEvent=function(b,d){this.newRazossEventListener(b);this.on(this.getEventName(b),d)};RAZOSS_API.onceRazossEvent=function(b,d){this.newRazossEventListener(b);
this.once(this.getEventName(b),d)};RAZOSS_API.removeRazossEventListener=function(b,d){this.newRazossEventListener(b);this.removeListener(this.getEventName(b),d)};RAZOSS_API.removeAllListeners=function(b){this.newRazossEventListener(b);this.removeListener(this.getEventName(b))}})(jQuery);
